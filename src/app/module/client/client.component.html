<!-- Modern Professional Navigation -->
<div (wheel)="onScroll($event)" class="h-full">
    <nav class="fixed top-0 w-[95%] md:w-[92%] left-1/2 transform -translate-x-1/2 mx-auto mt-4 z-50 rounded-2xl transition-all duration-500 ease-in-out"
        [ngClass]="{
            'nav-glassmorphic shadow-2xl': isScrolled,
            'bg-white/5 backdrop-blur-md shadow-lg border border-white/10': !isScrolled
        }">
        <div class="mx-auto px-5 sm:px-8 lg:px-10">
            <div class="flex items-center justify-between h-20">
                <!-- Logo Section -->
                <div class="flex-shrink-0">
                    <a routerLink="/" class="group block" id="nav-logo">
                        <img src="/assets/logo/what-to-eat-high-resolution-logo-white-transparent.png"
                            alt="What To Eat Logo"
                            class="w-24 h-auto object-contain brightness-200 transition-all duration-300 group-hover:scale-110 group-hover:brightness-125 drop-shadow-lg" />
                    </a>
                </div>

                <!-- Desktop Navigation Links -->
                <div class="hidden lg:flex items-center space-x-1">
                    <a mat-button [routerLink]="['/']" routerLinkActive="!text-gray-300 !underline"
                        [routerLinkActiveOptions]="{exact: true}"
                        class="text-white hover:text-gray-300 px-3 py-2 rounded-md text-sm font-medium" i18n>Home</a>
                    <a mat-button [routerLink]="['/dish']" routerLinkActive="!text-gray-300 !underline"
                        class="text-white hover:text-gray-300 px-3 py-2 rounded-md text-sm font-medium" i18n>Dish</a>
                    <a mat-button [routerLink]="['/ingredient']" routerLinkActive="!text-gray-300 !underline"
                        class="text-white hover:text-gray-300 px-3 py-2 rounded-md text-sm font-medium"
                        i18n>Ingredient</a>
                    <a mat-button [routerLink]="['/my-dishes']" routerLinkActive="!text-gray-300 !underline"
                        class="text-white hover:text-gray-300 px-3 py-2 rounded-md text-sm font-medium" i18n>My
                        Dishes</a>

                    @if (hasAdminDashboardPermission) {
                    <a mat-button [routerLink]="['/admin']" routerLinkActive="!text-gray-300 !underline"
                        class="text-white hover:text-gray-300 px-3 py-2 rounded-md text-sm font-medium" i18n>Admin</a>
                    }

                    <!-- Game Menu Dropdown -->
                    <button mat-button [matMenuTriggerFor]="gameMenu"
                        class="text-white/90 hover:text-white hover:bg-white/10 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-300 relative overflow-hidden group">
                        <span class="relative z-10 flex items-center gap-2">
                            <mat-icon class="text-lg">gamepad</mat-icon>
                            <span i18n>Game</span>
                            <mat-icon class="text-base">expand_more</mat-icon>
                        </span>
                        <span
                            class="absolute inset-0 bg-gradient-to-r from-pink-500/20 to-rose-500/20 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
                    </button>
                    <mat-menu #gameMenu="matMenu" class="modern-menu">
                        <button mat-menu-item [routerLink]="['/game', 'wheel-of-fortune']" class="modern-menu-item">
                            <mat-icon class="text-purple-400">casino</mat-icon>
                            <span i18n>Food Wheel</span>
                        </button>
                        <button mat-menu-item [routerLink]="['/game', 'flipping-card']" class="modern-menu-item">
                            <mat-icon class="text-blue-400">style</mat-icon>
                            <span i18n>Food Flip</span>
                        </button>
                        <button mat-menu-item [routerLink]="['/game', 'voting']" class="modern-menu-item">
                            <mat-icon class="text-green-400">how_to_vote</mat-icon>
                            <span i18n>Food Voting</span>
                        </button>
                    </mat-menu>

                    <!-- Language Selector -->
                    <button mat-button [matMenuTriggerFor]="languageMenu"
                        class="text-white/90 hover:text-white hover:bg-white/10 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-300 relative overflow-hidden group">
                        <span class="relative z-10 flex items-center gap-2">
                            <mat-icon class="text-lg">language</mat-icon>
                            <span class="uppercase">{{ currentLanguage }}</span>
                            <mat-icon class="text-base">expand_more</mat-icon>
                        </span>
                        <span
                            class="absolute inset-0 bg-gradient-to-r from-indigo-500/20 to-blue-500/20 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
                    </button>
                    <mat-menu #languageMenu="matMenu" class="modern-menu">
                        @for (lang of availableLanguages; track lang) {
                        <button mat-menu-item (click)="changeLanguage(lang.code)">
                            <div class="modern-menu-item">
                                <img [src]="lang.image" [alt]="lang.name" class="w-6 h-6 object-contain rounded" />
                                <span>{{ lang.name }}</span>
                            </div>
                        </button>
                        }
                    </mat-menu>
                </div>

                <!-- User Account Section (Desktop) -->
                <div class="hidden lg:flex items-center">
                    @if (payload) {
                    <button mat-icon-button [matMenuTriggerFor]="accountMenu"
                        class="relative group hover:scale-105 transition-transform duration-300">
                        <div class="relative">
                            <img class="w-11 h-11 rounded-full border-2 border-white/30 group-hover:border-blue-400/60 transition-all duration-300 shadow-lg object-cover"
                                [src]="avatarFromPlaceholder()" [alt]="payload.name" />
                            <span
                                class="absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-green-500 border-2 border-gray-900 rounded-full status-indicator"></span>
                        </div>
                    </button>
                    <mat-menu #accountMenu="matMenu" class="modern-menu" xPosition="before">
                        <div
                            class="px-6 py-4 border-b border-white/10 bg-gradient-to-br from-gray-800/50 to-gray-900/50">
                            <div class="flex items-center gap-3">
                                <img class="w-12 h-12 rounded-full border-2 border-white/20 object-cover"
                                    [src]="avatarFromPlaceholder()" [alt]="payload.name" />
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm font-semibold text-white truncate">{{ payload.name }}</p>
                                    <p class="text-xs text-gray-400 truncate">{{ payload.email }}</p>
                                </div>
                            </div>
                        </div>
                        <button mat-menu-item (click)="goToProfile()" class="modern-menu-item py-3">
                            <mat-icon class="text-blue-400">person</mat-icon>
                            <span i18n>Profile</span>
                        </button>
                        @if (hasAdminDashboardPermission) {
                        <button mat-menu-item routerLink="/admin" class="modern-menu-item py-3">
                            <mat-icon class="text-green-400">admin_panel_settings</mat-icon>
                            <span i18n>Admin Dashboard</span>
                        </button>
                        }
                        <mat-divider class="my-2"></mat-divider>
                        <button mat-menu-item (click)="logout()"
                            class="modern-menu-item py-3 text-red-400 hover:!bg-red-500/10">
                            <mat-icon class="text-red-400">logout</mat-icon>
                            <span i18n>Logout</span>
                        </button>
                    </mat-menu>
                    } @else {
                    <button mat-raised-button routerLink="/login" color="primary"
                        class="!rounded-xl !px-6 !py-2.5 !shadow-lg hover:!shadow-xl transition-all duration-300 !font-medium">
                        <mat-icon class="mr-2">login</mat-icon>
                        <span i18n>Login</span>
                    </button>
                    }
                </div>

                <!-- Mobile Menu Toggle -->
                <div class="lg:hidden flex items-center gap-2">
                    @if (payload) {
                    <button mat-icon-button [matMenuTriggerFor]="mobileAccountMenu" class="text-white">
                        <img class="w-9 h-9 rounded-full border-2 border-white/30 object-cover"
                            [src]="avatarFromPlaceholder()" [alt]="payload.name" />
                    </button>

                    <!-- Mobile Account Menu -->
                    <mat-menu #mobileAccountMenu="matMenu" class="modern-menu">
                        <div
                            class="px-6 py-4 border-b border-white/10 bg-gradient-to-br from-gray-800/50 to-gray-900/50">
                            <div class="flex items-center gap-3">
                                <img class="w-12 h-12 rounded-full border-2 border-white/20 object-cover"
                                    [src]="avatarFromPlaceholder()" [alt]="payload.name" />
                                <div class="flex-1 min-w-0">
                                    <p class="text-sm font-semibold text-white truncate">{{ payload.name }}</p>
                                    <p class="text-xs text-gray-400 truncate">{{ payload.email }}</p>
                                </div>
                            </div>
                        </div>
                        <button mat-menu-item (click)="goToProfile()" class="modern-menu-item py-3">
                            <mat-icon class="text-blue-400">person</mat-icon>
                            <span i18n>Profile</span>
                        </button>
                        @if (hasAdminDashboardPermission) {
                        <button mat-menu-item routerLink="/admin" class="modern-menu-item py-3">
                            <mat-icon class="text-green-400">admin_panel_settings</mat-icon>
                            <span i18n>Admin Dashboard</span>
                        </button>
                        }
                        <mat-divider class="my-2"></mat-divider>
                        <button mat-menu-item (click)="logout()"
                            class="modern-menu-item py-3 text-red-400 hover:!bg-red-500/10">
                            <mat-icon class="text-red-400">logout</mat-icon>
                            <span i18n>Logout</span>
                        </button>
                    </mat-menu>
                    }
                    <button mat-icon-button (click)="toggleMenu()"
                        class="text-white hover:bg-white/10 transition-all duration-300 rounded-xl">
                        <mat-icon class="text-3xl">{{ isMenuOpen ? 'close' : 'menu' }}</mat-icon>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div [ngClass]="{'max-h-[600px] opacity-100': isMenuOpen, 'max-h-0 opacity-0': !isMenuOpen}"
            class="lg:hidden overflow-hidden transition-all duration-500 ease-in-out">
            <div
                class="px-4 pt-4 pb-6 space-y-2 bg-gradient-to-b from-gray-800/60 to-gray-900/60 backdrop-blur-xl rounded-b-2xl border-t border-white/10">
                <!-- Mobile Navigation Links -->
                <a mat-button routerLink="/" routerLinkActive="mobile-nav-active"
                    [routerLinkActiveOptions]="{exact: true}"
                    class="w-full text-white/90 hover:text-white hover:bg-white/10 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 flex items-center gap-3 group"
                    i18n>
                    <mat-icon class="group-hover:scale-110 transition-transform">home</mat-icon>
                    <span>Home</span>
                </a>

                <a mat-button routerLink="/dish" routerLinkActive="mobile-nav-active"
                    class="w-full text-white/90 hover:text-white hover:bg-white/10 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 flex items-center gap-3 group"
                    i18n>
                    <mat-icon class="group-hover:scale-110 transition-transform">restaurant</mat-icon>
                    <span>Dish</span>
                </a>

                <a mat-button routerLink="/ingredient" routerLinkActive="mobile-nav-active"
                    class="w-full text-white/90 hover:text-white hover:bg-white/10 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 flex items-center gap-3 group"
                    i18n>
                    <mat-icon class="group-hover:scale-110 transition-transform">eco</mat-icon>
                    <span>Ingredient</span>
                </a>

                <a mat-button routerLink="/my-dishes" routerLinkActive="mobile-nav-active"
                    class="w-full text-white/90 hover:text-white hover:bg-white/10 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 flex items-center gap-3 group"
                    i18n>
                    <mat-icon class="group-hover:scale-110 transition-transform">bookmark</mat-icon>
                    <span>My Dishes</span>
                </a>

                @if (hasAdminDashboardPermission) {
                <a mat-button routerLink="/admin" routerLinkActive="mobile-nav-active"
                    class="w-full text-white/90 hover:text-white hover:bg-white/10 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 flex items-center gap-3 group"
                    i18n>
                    <mat-icon class="group-hover:scale-110 transition-transform">admin_panel_settings</mat-icon>
                    <span>Admin</span>
                </a>
                }

                <mat-divider class="!my-4 !border-white/10"></mat-divider>

                <!-- Mobile Game Menu -->
                <button mat-button [matMenuTriggerFor]="mobileGameMenu"
                    class="w-full text-white/90 hover:text-white hover:bg-white/10 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 flex items-center justify-between group">
                    <div class="flex items-center gap-3">
                        <mat-icon class="group-hover:scale-110 transition-transform">gamepad</mat-icon>
                        <span i18n>Game</span>
                    </div>
                    <mat-icon>chevron_right</mat-icon>
                </button>
                <mat-menu #mobileGameMenu="matMenu" class="modern-menu">
                    <button mat-menu-item [routerLink]="['/game', 'wheel-of-fortune']" class="modern-menu-item">
                        <mat-icon class="text-purple-400">casino</mat-icon>
                        <span i18n>Food Wheel</span>
                    </button>
                    <button mat-menu-item [routerLink]="['/game', 'flipping-card']" class="modern-menu-item">
                        <mat-icon class="text-blue-400">style</mat-icon>
                        <span i18n>Food Flip</span>
                    </button>
                    <button mat-menu-item [routerLink]="['/game', 'voting']" class="modern-menu-item">
                        <mat-icon class="text-green-400">how_to_vote</mat-icon>
                        <span i18n>Food Voting</span>
                    </button>
                </mat-menu>

                <!-- Mobile Language Selector -->
                <button mat-button [matMenuTriggerFor]="mobileLanguageMenu"
                    class="w-full text-white/90 hover:text-white hover:bg-white/10 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 flex items-center justify-between group">
                    <div class="flex items-center gap-3">
                        <mat-icon class="group-hover:scale-110 transition-transform">language</mat-icon>
                        <span>{{ currentLanguage.toUpperCase() }}</span>
                    </div>
                    <mat-icon>chevron_right</mat-icon>
                </button>
                <mat-menu #mobileLanguageMenu="matMenu" class="modern-menu">
                    @for (lang of availableLanguages; track lang) {
                    <button mat-menu-item (click)="changeLanguage(lang.code)">
                        <div class="modern-menu-item">
                            <img [src]="lang.image" [alt]="lang.name" class="w-6 h-6 object-contain rounded" />
                            <span>{{ lang.name }}</span>
                        </div>
                    </button>
                    }
                </mat-menu>

                @if (!payload) {
                <mat-divider class="!my-4 !border-white/10"></mat-divider>
                <button mat-raised-button routerLink="/login" color="primary"
                    class="w-full !py-3 !rounded-xl !shadow-lg hover:!shadow-xl transition-all duration-300">
                    <mat-icon class="mr-2">login</mat-icon>
                    <span i18n>Login</span>
                </button>
                }
            </div>
        </div>
    </nav>

    <router-outlet></router-outlet>

    <!-- Enhanced Footer -->
    <footer class="neumorphic-container-inset_dark">
        <div class="mx-auto px-4 py-12 sm:px-6 lg:px-8">
            <!-- Top Section with Logo and Links -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- Logo and About -->
                <div class="col-span-1 md:col-span-1">
                    <div class="flex items-center mb-4">
                        <img src="/assets/logo/what-to-eat-high-resolution-logo-transparent.png" alt="What To Eat Logo"
                            class="h-12 w-auto brightness-200 mr-2 hover:scale-105 transition-transform duration-300" />
                    </div>
                    <p class="text-gray-400 text-sm mb-4" i18n>
                        Discover delicious recipes and meal ideas tailored to your preferences and dietary needs.
                    </p>
                    <div class="flex items-center gap-3 mt-4">
                        <a href="#" class="social-icon" aria-label="Facebook">
                            <mat-icon>facebook</mat-icon>
                        </a>
                        <a href="#" class="social-icon" aria-label="TikTok">
                            <mat-icon svgIcon="tiktok"></mat-icon>
                        </a>
                        <a href="#" class="social-icon" aria-label="Instagram">
                            <mat-icon>photo_camera</mat-icon>
                        </a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="col-span-1">
                    <h3 class="text-lg font-semibold text-white mb-4" i18n>Quick Links</h3>
                    <div class="space-y-2">
                        <a routerLink="/" class="block text-gray-400 hover:text-white transition-colors duration-300"
                            i18n>Home</a>
                        <a routerLink="/dish"
                            class="block text-gray-400 hover:text-white transition-colors duration-300" i18n>All
                            Dishes</a>
                        <a routerLink="/about"
                            class="block text-gray-400 hover:text-white transition-colors duration-300" i18n>About
                            Us</a>
                        <a routerLink="/contact"
                            class="block text-gray-400 hover:text-white transition-colors duration-300" i18n>Contact</a>
                    </div>
                </div>

                <!-- Categories -->
                <div class="col-span-1">
                    <h3 class="text-lg font-semibold text-white mb-4" i18n>Categories</h3>
                    <div class="space-y-2">
                        @for (item of mealCategories; track item) {
                        <a href="#" class="block text-gray-400 hover:text-white transition-colors duration-300">
                            {{item | categoryTranslate}}
                        </a>
                        }
                    </div>
                </div>

                <!-- Newsletter -->
                <div class="col-span-1">
                    <h3 class="text-lg font-semibold text-white mb-4" i18n>Stay Updated</h3>
                    <p class="text-gray-400 text-sm mb-4" i18n>Subscribe to our newsletter for the latest recipes and
                        tips.</p>

                    <form [formGroup]="newsletterForm" (ngSubmit)="subscribeToNewsletter()" class="space-y-3">
                        <mat-form-field appearance="outline" class="w-full newsletter-field">
                            <mat-label class="text-gray-300" i18n>Your email</mat-label>
                            <input matInput formControlName="email" type="email" i18n-placeholder
                                placeholder="Enter your email" class="text-white">
                            <mat-error *ngIf="newsletterForm.get('email')?.hasError('required')" i18n>Email is
                                required</mat-error>
                            <mat-error *ngIf="newsletterForm.get('email')?.hasError('email')" i18n>Please enter a valid
                                email</mat-error>
                            <mat-icon matSuffix class="text-blue-400">email</mat-icon>
                        </mat-form-field>

                        <button mat-raised-button color="primary" type="submit"
                            class="w-full !rounded-xl !shadow-lg hover:!shadow-xl transition-all duration-300"
                            [disabled]="newsletterForm.invalid">
                            <mat-icon>send</mat-icon>
                            <span i18n>Subscribe</span>
                        </button>
                    </form>
                </div>
            </div>

            <!-- Bottom Section with Copyright -->
            <div class="border-t border-gray-800 mt-12 pt-8">
                <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                    <p class="text-gray-400 text-sm">
                        Â© {{currentYear}} What To Eat. All rights reserved.
                    </p>
                    <div class="flex flex-wrap justify-center gap-6">
                        <a href="#" class="text-gray-400 hover:text-blue-400 text-sm transition-colors duration-300"
                            i18n>
                            Privacy Policy
                        </a>
                        <a href="#" class="text-gray-400 hover:text-blue-400 text-sm transition-colors duration-300"
                            i18n>
                            Terms of Service
                        </a>
                        <a href="#" class="text-gray-400 hover:text-blue-400 text-sm transition-colors duration-300"
                            i18n>
                            Cookie Policy
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
</div>