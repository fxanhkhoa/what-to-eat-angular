<!-- dish-filter.component.html -->
<form [formGroup]="filterForm"
    class="flex flex-col gap-2 p-1 pb-3 from-slate-100 to-slate-300 bg-gradient-to-br rounded-lg">
    <!-- Search Bar -->
    <div class="mt-3">
        <mat-form-field appearance="outline" class="w-full">
            <mat-label i18n>{{ 'search' }}</mat-label>
            <input matInput formControlName="keyword">
            <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>
    </div>

    <mat-divider></mat-divider>

    <!-- Preparation Time -->
    <h6 class="mb-0.5 font-medium text-purple-900 px-3 text-sm">
        <span i18n-matTooltip matTooltip="{{ 'in-minute' }}">
            <i class="fa-solid fa-hourglass-end my-auto"></i>
            <span i18n>{{ 'preparation-time' }}</span>
        </span>
    </h6>
    <div class="px-5">
        <mat-slider [min]="1" [max]="240" [step]="1" [displayWith]="formatLabel" class="w-full">
            <input matSliderStartThumb formControlName="preparationTimeFrom">
            <input matSliderEndThumb formControlName="preparationTimeTo">
        </mat-slider>
    </div>

    <!-- Cooking Time -->
    <h6 class="mb-0.5 font-medium text-purple-900 px-3 text-sm">
        <span i18n-matTooltip matTooltip="{{ 'in-minute' }}">
            <i class="fa-regular fa-clock my-auto"></i>
            <span i18n>{{ 'cooking-time' }}</span>
        </span>
    </h6>
    <div class="px-5">
        <mat-slider [min]="1" [max]="240" [step]="1" [displayWith]="formatLabel" class="w-full">
            <input matSliderStartThumb formControlName="cookingTimeFrom">
            <input matSliderEndThumb formControlName="cookingTimeTo">
        </mat-slider>
    </div>

    <mat-divider></mat-divider>

    <!-- Difficulty Levels -->
    <div class="flex gap-2 mt-0.5 pl-2 flex-wrap">
        <button *ngFor="let item of difficultLevelsOptions" formControlName="difficultLevels"
            class="hover:drop-shadow-lg transition-all duration-300 rounded-lg" [ngClass]="{
                'neumorphic-easy': item === 'EASY',
                'neumorphic-medium': item === 'MEDIUM',
                'neumorphic-hard': item === 'HARD'
            }">
            <mat-chip>
                {{ item | categoryTranslate }}
            </mat-chip>
        </button>
    </div>

    <mat-divider></mat-divider>

    <!-- Meal Categories -->
    <div class="px-2">
        <mat-form-field appearance="outline" class="w-full">
            <mat-label i18n>{{ 'meal-categories' }}</mat-label>
            <mat-select [formControl]="filterForm.get('mealCategories')" multiple
                (selectionChange)="onMealCategoriesChange($event)">
                <mat-option *ngFor="let option of mealCategoriesOptions" [value]="option.value">
                    {{ option.label }}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>

    <!-- Ingredient Categories -->
    <div class="px-2">
        <mat-form-field appearance="outline" class="w-full">
            <mat-label>{{ 'ingredient-categories' | translate }}</mat-label>
            <mat-select [formControl]="filterForm.get('ingredientCategories')" multiple
                (selectionChange)="onIngredientCategoriesChange($event)">
                <mat-option *ngFor="let option of ingredientCategoriesOptions" [value]="option.value">
                    {{ option.label }}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>

    <!-- Tags -->
    <h6 class="mb-0.5 font-medium text-purple-900 px-3 text-sm">
        <i class="fa-solid fa-tag my-auto"></i>
        <span>{{ 'tags' | translate }}</span>
    </h6>

    <div class="px-2">
        <mat-form-field appearance="outline" class="w-full">
            <mat-label>{{ 'tags' | translate }}</mat-label>
            <mat-chip-grid #chipGrid aria-label="Tag selection">
                <mat-chip-row *ngFor="let tag of tags" [removable]="true" (removed)="removeTag(tag)">
                    {{tag.value}}
                    <button matChipRemove>
                        <mat-icon>cancel</mat-icon>
                    </button>
                </mat-chip-row>
                <input placeholder="{{ 'add-tag' | translate }}" [matChipInputFor]="chipGrid"
                    (matChipInputTokenEnd)="addTag($event.value); $event.chipInput.clear()">
            </mat-chip-grid>
        </mat-form-field>
    </div>

    <!-- Search Button -->
    <div class="flex px-2 mt-2">
        <button mat-flat-button
            class="w-full px-5 py-2.5 font-medium bg-purple-100 hover:bg-purple-200 hover:text-purple-600 text-purple-500 rounded-lg text-sm transition-all duration-300"
            (click)="onSearch()">
            <i class="fa fa-search"></i>
            <span class="font-semibold ml-1">
                {{ 'search' | translate }}
            </span>
        </button>
    </div>
</form>