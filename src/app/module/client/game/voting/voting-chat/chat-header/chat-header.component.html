<div class="w-full pr-4">
  <div class="flex w-full items-center justify-between w-full">
    <div class="flex items-center gap-2">
      <mat-icon class="text-white text-[20px]">chat</mat-icon>
      <span class="font-semibold text-sm" i18n>Voting Chat</span>
      <!-- Connection Status -->
      <div
        class="ml-2 flex items-center"
        [class.text-green-300]="_isConnected()"
        [class.text-red-300]="_connectionError()"
      >
        <mat-icon class="text-[16px] opacity-70">{{
          _isConnected() ? "wifi" : "wifi_off"
        }}</mat-icon>
      </div>
    </div>

    <div class="flex items-center gap-2">
      <!-- Online Users Counter -->
      <span
        class="flex items-center gap-1 text-xs px-2 py-1 rounded-full bg-white/20"
        matTooltip="{{ formatUserCount(_onlineCount()) }}"
      >
        <mat-icon class="text-[14px]">people</mat-icon>
        <span
          class="online-count-number transition-all duration-300 ease-out transform"
          [class.animate-pulse-scale]="isOnlineCountAnimating()"
          [class.bounce-in]="animationType() === 'increase'"
          [class.fade-out]="animationType() === 'decrease'"
          >{{ _onlineCount() }}</span
        >
      </span>
    </div>
  </div>

  <!-- Connection Error Alert -->
  @if (_connectionError()) {
  <div
    class="mt-2 p-2 bg-red-100 rounded-lg flex items-center gap-2 text-red-700 text-xs"
  >
    <mat-icon class="text-[16px]">error_outline</mat-icon>
    <span>{{ _connectionError() }}</span>
    <button
      mat-button
      (click)="onReconnect()"
      class="ml-auto text-red-700 min-w-0 px-2 py-1 text-[11px]"
    >
      <mat-icon class="text-[14px] mr-1">refresh</mat-icon>
      <span i18n>Reconnect</span>
    </button>
  </div>
  }
</div>
