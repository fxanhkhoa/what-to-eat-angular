<div class="flex flex-col gap-1 p-5 container mx-auto">
    <div class="flex items-center">
        <div class="flex justify-between w-full">
            <div class="flex flex-col gap-3">
                <span i18n class="text-gray-300 px-3 pt-3">Filter By</span>
                <form [formGroup]="mealCategoryForm" class="max-h-40 overflow-auto">
                    <mat-selection-list [multiple]="false" formControlName="mealCategory"
                        [hideSingleSelectionIndicator]="true">
                        @for (item of mealCategories; track item) {
                        <mat-list-option value="{{ item }}" i18n>{{ item }}</mat-list-option>
                        }
                    </mat-selection-list>
                </form>
            </div>
            <div>
                <h3 i18n
                    class="text-5xl font-bold mb-6 bg-gradient-to-r from-[#F3A446] to-[#A06235] text-transparent bg-clip-text">
                    Favorite Dishes</h3>
            </div>
            <div class="flex gap-5 max-w-40 items-center text-[#F3A446]">
                <div>
                    <mat-icon class="scale-150">select_all</mat-icon>
                </div>
                <span class="tracking-wider leading-8">Let's pick your favorites to enlighten your day</span>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-12 gap-3 mt-5">
        @if (isLoading) {
        <div class="col-span-12 flex justify-center">
            <mat-spinner></mat-spinner>
        </div>
        }
        @else {
        @for (item of dishes; track item) {
        <div class="col-span-6 md:col-span-4 lg:col-span-3">
            <mat-card class="ratio-3/4 p-5 h-full puff-in-center">
                <div class="flex gap-1 absolute top-3 right-3">
                    <span i18n='EASY|MEDIUM|HARD' [ngClass]="{
                                'neumorphic-easy': item.difficultLevel === 'EASY',
                                'neumorphic-medium': item.difficultLevel === 'MEDIUM',
                                'neumorphic-hard': item.difficultLevel === 'HARD'
                            }" class="text-sm lowercase">
                        {{ item.difficultLevel }}
                    </span>
                </div>
                <div class="flex flex-col gap-1 h-full">
                    <div class="flex justify-center">
                        <div class="w-40 h-40 relative">
                            <img [src]="item.thumbnail ?? '/images/placeholder.png'"
                                alt="{{(item.title | multiLanguage : localeId)?.data}}"
                                class="absolute w-40 h-40 ratio-square object-cover rounded-full" />
                        </div>
                    </div>
                    <div class="flex justify-end">
                        <button matIconButton [matTooltip]="(item.shortDescription | multiLanguage : localeId)?.data ">
                            <mat-icon>info_outline</mat-icon>
                        </button>
                    </div>
                    <div class="flex pt-1 pb-2 gap-3 min-h-12 max-w-full overflow-x-auto">
                        <app-category-badges [useColorPalette]="false"
                            [categories]="item.mealCategories"></app-category-badges>
                    </div>
                    <div class="flex justify-between mt-2">
                        <div class="flex gap-1">
                            <mat-icon>schedule</mat-icon>
                            <span i18n='min' class="italic">{{ item.preparationTime | number: '1.0-0' }} min</span>
                        </div>
                    </div>
                    <div class="flex flex-col justify-between gap-3 flex-1">
                        <span class="text-xl font-bold" i18n>{{ (item.title | multiLanguage :
                            localeId)?.data }}
                        </span>
                        <div class="mt-auto flex justify-end">
                            <button class="mt-auto !bg-[#2a2a2a]" matButton="elevated" [routerLink]="['/dish', item.slug]">
                                <mat-icon>arrow_forward</mat-icon>
                                <span i18n>Details</span>
                            </button>
                        </div>
                    </div>
                </div>
            </mat-card>
        </div>
        }
        }
    </div>

    <div class="flex justify-center mt-5">
        <button matButton="tonal" [routerLink]="['/dish']">
            <span i18n>View All</span>
            <mat-icon>keyboard_double_arrow_down</mat-icon>
        </button>
    </div>
</div>