<section class="relative min-h-screen bg-gradient-to-br from-gray-900 via-purple-900/20 to-gray-900">
    <!-- Background Effects -->
    <div class="absolute inset-0 -z-10">
        <div class="absolute top-10 sm:top-20 left-5 sm:left-10 w-64 h-64 sm:w-96 sm:h-96 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-full blur-3xl animate-pulse"></div>
        <div class="absolute bottom-10 sm:bottom-20 right-5 sm:right-10 w-80 h-80 sm:w-[500px] sm:h-[500px] bg-gradient-to-tr from-blue-500/20 to-cyan-500/20 rounded-full blur-3xl animate-pulse" style="animation-delay: 1.5s"></div>
    </div>

    <div class="mx-auto px-4 sm:px-6 lg:px-8 pt-24 pb-16">
        <!-- Header Section -->
        <div class="mb-8 sm:mb-12">
            <!-- Back Button & Title -->
            <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-6 mb-6">
                <button mat-fab (click)="goBack()"
                    class="!bg-white/10 dark:!bg-gray-800/50 backdrop-blur-md !shadow-xl hover:!bg-white/20 !transition-all !duration-300 hover:!scale-110 !border !border-white/20"
                    aria-label="Go back">
                    <mat-icon class="text-white">arrow_back</mat-icon>
                </button>

                <div class="flex-1">
                    <div class="inline-flex items-center gap-3 px-4 sm:px-6 py-2 sm:py-3 rounded-full bg-gradient-to-r from-purple-500/10 to-pink-500/10 border border-purple-500/20 backdrop-blur-sm mb-3">
                        <mat-icon class="!text-purple-400">restaurant</mat-icon>
                        <span class="text-xs sm:text-sm font-semibold text-purple-300 uppercase tracking-wide" i18n>Ingredients Database</span>
                    </div>
                    <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-white">
                        <span class="bg-gradient-to-r from-purple-400 via-pink-400 to-purple-400 text-transparent bg-clip-text" i18n>
                            Discover Ingredients
                        </span>
                    </h1>
                    <p class="text-sm sm:text-base md:text-lg text-gray-300 mt-2" i18n>
                        Explore nutritional information and details about various ingredients
                    </p>
                </div>
            </div>

            <!-- Search Bar -->
            <div class="max-w-3xl -ml-4">
                <app-search-bar 
                    class="w-full" 
                    [keyword]="keyword()" 
                    (onResult)="onSearch($event)">
                </app-search-bar>
            </div>
        </div>

        <!-- Stats Bar -->
        @if (!loading()) {
        <div class="grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4 mb-8 sm:mb-12">
            <div class="bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl sm:rounded-2xl p-4 sm:p-6">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center">
                        <mat-icon class="!text-white">inventory_2</mat-icon>
                    </div>
                    <div>
                        <p class="text-xl sm:text-2xl font-bold text-white">{{ total() }}</p>
                        <p class="text-xs sm:text-sm text-gray-400" i18n>Total Items</p>
                    </div>
                </div>
            </div>

            <div class="bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl sm:rounded-2xl p-4 sm:p-6">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center">
                        <mat-icon class="!text-white">view_list</mat-icon>
                    </div>
                    <div>
                        <p class="text-xl sm:text-2xl font-bold text-white">{{ rows().length }}</p>
                        <p class="text-xs sm:text-sm text-gray-400" i18n>Showing</p>
                    </div>
                </div>
            </div>

            <div class="bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl sm:rounded-2xl p-4 sm:p-6">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center">
                        <mat-icon class="!text-white">pages</mat-icon>
                    </div>
                    <div>
                        <p class="text-xl sm:text-2xl font-bold text-white">{{ currentPage() }}</p>
                        <p class="text-xs sm:text-sm text-gray-400" i18n>Page</p>
                    </div>
                </div>
            </div>

            <div class="bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl sm:rounded-2xl p-4 sm:p-6">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center">
                        <mat-icon class="!text-white">{{ keyword() ? 'search' : 'grid_view' }}</mat-icon>
                    </div>
                    <div>
                        <p class="text-xl sm:text-2xl font-bold text-white">{{ keyword() ? 'Search' : 'All' }}</p>
                        <p class="text-xs sm:text-sm text-gray-400" i18n>{{ keyword() ? 'Results' : 'Categories' }}</p>
                    </div>
                </div>
            </div>
        </div>
        }

        <!-- Content Section -->
        <div class="min-h-[400px]">
            @if (loading()) {
            <!-- Loading State -->
            <div class="flex flex-col items-center justify-center py-20">
                <div class="relative">
                    <mat-progress-spinner 
                        mode="indeterminate" 
                        diameter="80"
                        class="[&>svg>circle]:!stroke-purple-500">
                    </mat-progress-spinner>
                    <div class="absolute inset-0 flex items-center justify-center">
                        <mat-icon class="text-purple-400 animate-pulse">restaurant</mat-icon>
                    </div>
                </div>
                <p class="text-gray-300 mt-6 text-lg font-medium" i18n>Loading ingredients...</p>
            </div>
            } @else {
                @if (rows().length === 0) {
                <!-- Empty State -->
                <div class="flex flex-col items-center justify-center py-20">
                    <div class="w-24 h-24 sm:w-32 sm:h-32 rounded-full bg-gradient-to-br from-purple-500/20 to-pink-500/20 flex items-center justify-center mb-6">
                        <mat-icon class="text-purple-400">shopping_basket</mat-icon>
                    </div>
                    <h3 class="text-2xl sm:text-3xl font-bold text-white mb-3" i18n>No Ingredients Found</h3>
                    <p class="text-gray-400 text-base sm:text-lg mb-6" i18n>Try adjusting your search or browse all ingredients</p>
                    @if (keyword()) {
                    <button mat-raised-button (click)="onSearch('')"
                        class="!bg-gradient-to-r !from-purple-500 !to-pink-500 !text-white !rounded-full !px-6 !py-3 !font-semibold">
                        <mat-icon>clear</mat-icon>
                        <span i18n>Clear Search</span>
                    </button>
                    }
                </div>
                } @else {
                <!-- Ingredients Grid -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 lg:gap-8">
                    @for(ingredient of rows(); track ingredient._id) {
                    <app-ingredient-card 
                        [ingredient]="ingredient"
                        class="animate-fade-in"
                        [style.animation-delay]="($index * 50) + 'ms'">
                    </app-ingredient-card>
                    }
                </div>
                }
            }
        </div>

        <!-- Pagination -->
        @if (!loading() && rows().length > 0) {
        <div class="mt-12 flex justify-center">
            <div class="bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-4 shadow-2xl">
                <mat-paginator 
                    [length]="total()" 
                    [pageSizeOptions]="[10, 25, 50, 100]" 
                    [pageIndex]="currentPage() - 1"
                    [pageSize]="limit()" 
                    (page)="paginatorChange($event)" 
                    showFirstLastButtons 
                    aria-label="Select page"
                    class="!bg-transparent !text-white [&_.mat-mdc-paginator-container]:!text-gray-300 [&_.mat-mdc-icon-button]:!text-purple-400 [&_.mat-mdc-icon-button:hover]:!bg-purple-500/20">
                </mat-paginator>
            </div>
        </div>
        }
    </div>
</section>